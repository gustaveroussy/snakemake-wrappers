rule clintools_checkvar_wgs:
	input:
		"{basedir}/{analysis}/{prefix}/chr_{identito_index}/{prefix}_chr_{identito_index}.mpileup"
	output:
		variant = "{basedir}/{analysis}/{prefix}/chr_{identito_index}/{prefix}_chr_{identito_index}.checkvariants",
		tempFile = temp("{basedir}/{analysis}/{prefix}/chr_{identito_index}/chr_{identito_index}.txt")
	resources: io=3
	log:
		"{basedir}/{analysis}/log/{prefix}/chr_{identito_index}/{prefix}_chr_{identito_index}_clintools_checkvariants.log"
	shell:
		"""
		touch {output.tempFile}
		echo -e \'{wildcards.prefix}\\t{input}' > {output.tempFile}
		singularity exec -B /mnt/beegfs/database/bioinfo/seqoia:/mnt/beegfs/database/bioinfo/seqoia -B /mnt/beegfs/scratch/:/mnt/beegfs/scratch/ -B /mnt/beegfs/database/bioinfo/seqoia/original/annotations:/data/annotations /mnt/beegfs/software/seqoia/singularity/clintools_1.1.sif bash -c "check_variants.py {output.tempFile} > {output.variant}"
		"""
