rule QC_globale_json:
	input:
		QC = lambda wildcards: expand("{basedir}/{analysis}/{analysis}_qc_lab_temp.csv",basedir=basedir, analysis=wildcards.analysis),
		script_python = lambda wildcards: expand("{script_dir}/QC_lab_json.py", script_dir=script_dir)
	output:
		"{export_dir}/{analysis}/{analysis}_qc_lab.json"
	log:
		basedir + "/{analysis}/log/{analysis}_qc_lab.json"
	params:
		pid_crc = config["general_informations"]["PID_CRC"],
		pipeline_version = config["general_informations"]["ID_PIPELINE"],
		date  = config["general_informations"]["BIOINFO_ANALYSIS_DATE"],
		sample = config["general_informations"]["SAMPLES"],
		json = config["general_informations"]["PIPELINE_CONFIG"],
	shell:
		"python3 {input.script_python} -q {input.QC} -a {wildcards.analysis} -p {params.pid_crc} -v {params.pipeline_version} -d {params.date} -j {params.json}  -o {output} 2>&1 | tee -a {log}"
