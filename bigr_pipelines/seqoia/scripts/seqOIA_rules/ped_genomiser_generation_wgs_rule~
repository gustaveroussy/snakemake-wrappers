rule ped_genomiser_generation_wgs:
	input:
		#sample_sheet_database = "/scratch2/tmp/sample_sheet_database/sample_sheet_database.csv",
		json = "{export_dir}/{sequenceur}/{run}/json/",
		flag = "{export_dir}/{sequenceur}/{run}/json/curl_request.done",
		database_script = "{script_dir}/sample_sheet_database.py"
	output:
		"{export_dir}/{sequenceur}/{run}/ped_genomiser_generation.done"	
	log:
		"{export_dir}/{sequenceur}/{run}/log/ped_genomiser_generation.log"
	shell:
		"python3 {input.database_script} && python3 script/ped_genomiser_generation.py -j {input.json} -c /home/alegendre/sample_sheet_database/sample_sheet_database.csv && touch {wildcards.export_dir}/{wildcards.sequenceur}/{wildcards.run}/ped_genomiser_generation.done 2>&1 | tee -a {log}"

