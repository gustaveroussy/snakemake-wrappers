rule genomiser_wgs:
	input:
		vcf = "{basedir}/{analysis}/{analysis}_final_temp.vcf",
		yml = lambda wildcards: "{basedir}/{}/{}-analysis-genome.yml".format(wildcards.analysis, str(wildcards.analysis.split("_")[4])),
		properties = "application.properties"
	output:
		vcf = "{basedir}/{analysis}/genomiser/{analysis}_genomiser.vcf",
		html = "{basedir}/{analysis}/genomiser/{analysis}_genomiser.html",
		tsv_variant = "{basedir}/{analysis}/genomiser/{analysis}_genomiser.variants.tsv",
		tsv_genes = "{basedir}/{analysis}/genomiser/{analysis}_genomiser.genes.tsv"
	params:
		database = config["genomiser"]["OPTIONS"]
	log:
		"{basedir}/{analysis}/log/genomiser/genomiser.log"
	shell:
		"java -Xms4g -Xmx8g -jar /usr/share/exomiser/exomiser-cli-12.0.1.jar --analysis {input.yml} --exomiser.data-directory={params.database} 2>&1 | tee -a {log}"	
