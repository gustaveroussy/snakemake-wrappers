rule fusion_annotator:
	input:
		tsv = "{basedir}/{analysis}/{sample}/star_fusion/fusion_inspector/{sample}.FusionInspector.fusions.abridged.coding_effect.final.tsv" 
	output:
		txt = "{basedir}/{analysis}/{sample}/star_fusion/annotator/{sample}.star-fusion-annotator.annotated_list.txt"
	resources: io=2
	log:
		"{basedir}/{analysis}/log/{sample}/{sample}_star_fusion_annotator.log"
	params:
		fusion_annotator_options = config["fusion_annotator"]["OPTIONS"],
		genome_dir = config["fusion_annotator"]["GENOME_DIR"],
	shell:
		"/usr/local/src/STAR-Fusion/FusionAnnotator/FusionAnnotator {params.fusion_annotator_options} --genome_lib_dir {params.genome_dir} --annotate {input.tsv} > {output.txt} 2>&1 | tee -a {log}"
